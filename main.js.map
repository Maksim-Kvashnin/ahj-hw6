{"version":3,"file":"main.js","mappings":"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","sources":["webpack://ahj-hw6/./src/js/Task.js","webpack://ahj-hw6/./src/js/app.js"],"sourcesContent":["export default class Task {\n  constructor(container, headerText) {\n    this.container = container;\n\n    const tasks = document.createElement('div');\n    tasks.classList.add('container-task');\n    container.appendChild(tasks);\n\n    const header = document.createElement('div');\n    header.classList.add('tasks_header');\n    tasks.appendChild(header);\n\n    const tasksHeaderText = document.createElement('h4');\n    tasksHeaderText.classList.add('tasks_header_text');\n    tasksHeaderText.textContent = headerText;\n    header.appendChild(tasksHeaderText);\n\n    const optionsBtn = document.createElement('span');\n    optionsBtn.classList.add('task_header_options');\n    optionsBtn.textContent = '...';\n    header.appendChild(optionsBtn);\n\n    const taskList = document.createElement('div');\n    taskList.classList.add('task_list');\n    tasks.appendChild(taskList);\n\n    const adderCard = document.createElement('div');\n    adderCard.classList.add('adder_card');\n    adderCard.textContent = '+ Add another card';\n    tasks.appendChild(adderCard);\n\n    adderCard.addEventListener('click', (e) => this.onAddCardClick(e));\n\n    taskList.addEventListener('mousedown', (e) => this.onMouseDownTask(e));\n\n    this.tasks = tasks;\n    this.taskList = taskList;\n    this.adderCard = adderCard;\n\n    this.dragging = null;\n    this.startX = 0;\n    this.startY = 0;\n  }\n\n  onMouseDownTask(e) {\n    e.preventDefault();\n\n    if (e.button !== 0) return;\n\n    const actualEl = e.target;\n\n    if (!actualEl.classList.contains('task_card')) {\n      return;\n    }\n\n    this.dragging = actualEl;\n\n    const rect = this.dragging.getBoundingClientRect();\n    this.startX = e.clientX - rect.left;\n    this.startY = e.clientY - rect.top;\n\n    this.previousNeighbour = this.dragging.previousElementSibling;\n    this.nextNeighbour = this.dragging.nextElementSibling;\n\n    this.placeholder = document.createElement('div');\n    this.placeholder.style.width = `${this.dragging.offsetWidth}px`;\n    this.placeholder.style.height = `${this.dragging.offsetHeight}px`;\n    this.dragging.parentNode.insertBefore(this.placeholder, this.dragging);\n\n    this.dragging.classList.add('dragging');\n\n    this.dragging.style.left = `${rect.left}px`;\n    this.dragging.style.top = `${rect.top}px`;\n    this.dragging.style.width = `${rect.width}px`;\n\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    document.documentElement.addEventListener('mouseup', this.onMouseUp);\n    document.documentElement.addEventListener('mousemove', this.onMouseMove);\n  }\n\n  onMouseMove(e) {\n    if (!this.dragging) return;\n\n    const posX = e.clientX - this.startX;\n    const posY = e.clientY - this.startY;\n    this.dragging.style.left = `${posX}px`;\n    this.dragging.style.top = `${posY}px`;\n\n    const { target } = e;\n    if (target.classList.contains('task_card')) {\n      const rect = target.getBoundingClientRect();\n      const dropY = e.clientY - rect.top;\n      if (dropY > rect.height / 2) {\n        target.parentNode.insertBefore(this.placeholder, target.nextSibling);\n      } else {\n        target.parentNode.insertBefore(this.placeholder, target);\n      }\n    }\n  }\n\n  onMouseUp(e) {\n    if (!this.dragging) return;\n\n    this.dragging.style = undefined;\n\n    const { target } = e;\n    let previous = target.previousElementSibling;\n    if (previous && !previous.classList.contains('task_card')) {\n      previous = null;\n    }\n    let next = target.nextElementSibling;\n    if (next && !next.classList.contains('task_card')) {\n      next = null;\n    }\n\n    const targetList = target.closest('.task_list');\n    let container = targetList;\n\n    if (!targetList) {\n      previous = this.previousNeighbour;\n      next = this.nextNeighbour;\n      container = this.dragging.parentNode;\n    } else if (targetList && !previous && !next) {\n      targetList.appendChild(this.dragging);\n    }\n\n    if (previous) {\n      container.insertBefore(this.dragging, previous.nextSibling);\n    } else if (next) {\n      container.insertBefore(this.dragging, next);\n    } else {\n      container.appendChild(this.dragging);\n    }\n\n    this.dragging.classList.remove('dragging');\n\n    if (this.placeholder && this.placeholder.parentNode) {\n      this.placeholder.parentNode.removeChild(this.placeholder);\n    }\n\n    this.dragging = null;\n    this.placeholder = null;\n\n    document.documentElement.removeEventListener('mouseup', this.onMouseUp);\n    document.documentElement.removeEventListener('mouseover', this.onMouseMove);\n  }\n\n  onAddCardClick(e) {\n    if (e.button !== 0) return;\n    this.addCard();\n  }\n\n  addCard(textTask = undefined) {\n    const card = document.createElement('div');\n    card.classList.add('task_card');\n\n    const tmp = document.createElement('div');\n    tmp.classList.add('close_button_container');\n    card.appendChild(tmp);\n\n    const closeButton = document.createElement('span');\n    closeButton.classList.add('close_button');\n    closeButton.innerText = '×';\n\n    closeButton.addEventListener('click', (e) => {\n      e.preventDefault();\n      card.remove();\n    });\n\n    tmp.appendChild(closeButton);\n\n    const cardText = document.createElement('div');\n    cardText.classList.add('content_card');\n    if (!textTask) {\n      cardText.innerText = 'Нажмите карандаш, чтобы начать редактирование';\n    } else {\n      cardText.setAttribute('contenteditable', 'true');\n      cardText.innerText = textTask;\n    }\n\n    card.appendChild(cardText);\n\n    const cardTextEdit = document.createElement('div');\n    cardTextEdit.classList.add('card_text_edit');\n    cardTextEdit.innerText = '\\u270E';\n    card.appendChild(cardTextEdit);\n\n    cardTextEdit.addEventListener('click', () => {\n      if (cardText.getAttribute('contenteditable') === null) {\n        cardText.textContent = '';\n      }\n      cardText.setAttribute('contenteditable', 'true');\n      cardText.focus();\n    });\n\n    this.taskList.appendChild(card);\n  }\n}\n","import Task from './Task';\n\nconst container = document.querySelector('.container');\n\nconst tasks = container.querySelectorAll('.task');\nconst task1 = tasks[0];\n\nconst containerTasks = document.createElement('div');\ncontainerTasks.classList.add('container-tasks');\ntask1.appendChild(containerTasks);\n\nconst tasksTodo = new Task(containerTasks, 'todo');\nconst tasksInProgress = new Task(containerTasks, 'in progress');\n\n// eslint-disable-next-line no-unused-vars\nconst tasksDone = new Task(containerTasks, 'done');\n\n['1', '2', '3'].forEach((text) => tasksTodo.addCard(text));\n['Задача 1', 'Задача 2'].forEach((text) => {\n  tasksInProgress.addCard(text);\n});\n"],"names":["Task","constructor","container","headerText","this","tasks","document","createElement","classList","add","appendChild","header","tasksHeaderText","textContent","optionsBtn","taskList","adderCard","addEventListener","e","onAddCardClick","onMouseDownTask","dragging","startX","startY","preventDefault","button","actualEl","target","contains","rect","getBoundingClientRect","clientX","left","clientY","top","previousNeighbour","previousElementSibling","nextNeighbour","nextElementSibling","placeholder","style","width","offsetWidth","height","offsetHeight","parentNode","insertBefore","onMouseUp","bind","onMouseMove","documentElement","posX","posY","nextSibling","undefined","previous","next","targetList","closest","remove","removeChild","removeEventListener","addCard","textTask","arguments","length","card","tmp","closeButton","innerText","cardText","setAttribute","cardTextEdit","getAttribute","focus","task1","querySelector","querySelectorAll","containerTasks","tasksTodo","tasksInProgress","forEach","text"],"sourceRoot":""}